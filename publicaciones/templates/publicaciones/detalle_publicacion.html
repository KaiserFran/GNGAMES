{% extends "base.html" %}
{% block title %}Inicio{% endblock %}
{% block content %}
<style>
.estilo_publicacion {
    max-width: 900px;
    margin: 40px auto;
    padding: 20px;
    font-family: Arial, sans-serif;
    background-color: rgba(255, 255, 255, 0.9);
}

.estilo_publicacion h1 {
    text-align: center;
    margin-bottom: 30px;
}

.imagen {
    display: flex;
    gap: 20px;
    margin: 0 auto 30px auto; /* centra horizontalmente y agrega margen inferior */
    align-items: flex-start;
    justify-content: center; /* centra los elementos dentro del flex */
    max-width: 900px; /* opcional: limita el ancho del contenedor */
}

.foto {
    max-width: 40%;
    height: auto;
    border-radius: 8px;
}

.descripcion {
    flex: 1;
    line-height: 1.6;
}

.comentarios {
    margin-top: 40px;
}

.comentario {
    padding: 10px;
    border-bottom: 1px solid #ddd;
    margin-bottom: 10px;
}

form {
    margin-top: 20px;
}

form textarea {
    width: 100%;
    padding: 10px;
    font-size: 14px;
    border-radius: 5px;
    border: 1px solid #ccc;
    resize: vertical;
}

form button {
    margin-top: 10px;
    padding: 8px 16px;
    background-color: #0151f0;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

form button:hover {
    background-color: #0138a6;
}

.formulario-comentario {
    margin-top: 20px;
    padding: 15px;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #f3fdff;
}

.formulario-comentario h3 {
    margin-top: 0;
}

.formulario-comentario textarea {
    width: 100%;
    padding: 10px;
    font-size: 14px;
    border-radius: 5px;
    border: 1px solid #ccc;
    resize: vertical;
    box-sizing: border-box;
}

.formulario-comentario button {
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #6a0dad;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.formulario-comentario button:hover {
    background-color:#4b0082;
}
</style>
<body>
<main class="estilo_publicacion">
    <!-- Título centrado -->
    <h1 style="text-align: center;">{{ publicacion.titulo }}</h1>

    <!-- Imagen centrada -->
    {% if publicacion.imagen %}
        <div style="text-align: center; margin: 20px 0;">
            <img src="{{ publicacion.imagen.url }}" alt="{{ publicacion.titulo }}" style="max-width: 500px; width: 100%; height: auto; border-radius: 8px;">
        </div>
    {% endif %}

    <!-- Descripción -->
    <div style="margin-bottom: 30px;">
        <p>{{ publicacion.descripcion|linebreaks }}</p>
    </div>

    <hr>

    <!-- Comentarios -->
    <div class="comentarios" style="margin-bottom: 30px;">
        <h3>Comentarios</h3>
        <ul>
            {% for comentario in comentarios %}
                <li>
                    <strong>{{ comentario.usuario.username }}</strong>: {{ comentario.texto }}
                    <br>
                    <small>{{ comentario.fecha_creacion }}</small>
                </li>
            {% empty %}
                <li>No hay comentarios todavía.</li>
            {% endfor %}
        </ul>
    </div>

    <hr>

    <!-- Formulario para comentar -->
    <div class="formulario-comentario" style="margin-top: 20px;">
        <h3>Agregar un comentario</h3>
        {% if user.is_authenticated %}
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Enviar comentario</button>
        </form>
        {% else %}
        <p>Debes <a href="{% url 'login' %}">iniciar sesión</a> para comentar.</p>
        {% endif %}
    </div>
</main>
</body>
{% endblock %}